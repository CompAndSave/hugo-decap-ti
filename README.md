# Static blog content generated by Hugo and admin via Decap CMS

## How It Works

This repository hosts Hugo and Decap CMS configuration, content markdown and static assets.
GitHub action at this repository will have Hugo to generate the static files and copy to another repository which hosts the static content.
That repository will push the static content to AWS S3 by GitHub action.

## Installation and Configuration

### Hugo

Hugo is a fast and modern static site generator written in Go, and designed to make website creation fun again.
Follow this link to install Hugo at your local environment for development purpose.
https://gohugo.io/getting-started/quick-start/

Tips:

You can add the shortcut command found at `.bashrc` to run hugo server at your local. It will sync the updated configuration and content to the public folder `blog/` as the change on watched files happens.

**Important files**

- `hugo.toml`: Hugo configuration file - To learn more: https://gohugo.io/getting-started/configuration/


### Decap CMS

Decap CMS is a CMS for static site generators like Hugo. Give users a simple way to edit and add content to any site built with a static site generator.
To learn more about Decap CMS. https://github.com/decaporg/decap-cms

Decap is using Netlify to do the user authentication by default. In order to use Decap without Netlify, a standalone or 3rd authenticating system is required.
You can easily create yours via GitHub authentication by AWS Lambda. Check out this repository for details. https://github.com/lubu12/decap-sveltia-cms-auth-lambda

**Important files**

All configuration files for Decap CMS is under `static/admin`.

- `config.yml`: Decap CMS configuration file. To learn more: https://decapcms.org/docs/configuration-options/
- `index.html`: If the blog is hosted in a subfolder of a domain. `config.yml` path will needed to be specified at this file. All the custom widgets should be linked from this file.

### GitHub Action

`.github/workflows/hugo.yaml`

Configuration file for Github action. When `master` branch is pushed, GitHub action will build the Hugo container, generate the static content files and copy them to the static content repository.
Since the script will copy the generated static files to static content repository. Personal access token is required and needed to store at Repository secret. To learn more: https://github.com/lubu12/copy-files-to-repository
